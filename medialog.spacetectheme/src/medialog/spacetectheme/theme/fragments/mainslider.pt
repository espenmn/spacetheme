<section id="main-slider" class="no-margin"> 
<tal:check tal:condition="exists: context/slider"
				tal:define="speed python: int(context.portal_registry['medialog.spacetectheme.interfaces.ISpacetecSettings.speed']);
				          timeout python: int(context.portal_registry['medialog.spacetectheme.interfaces.ISpacetecSettings.timeout'])">
	<div id="slider" tal:attributes="data-speed speed; data-timeout timeout">
        <tal:repeat tal:repeat="item  context/slider/@@contentlisting">
            <div  class="fillme" tal:define="item_url item/getURL|item/absolute_url;
				    image_url python:item_url + '/@@images/image';
				    style     python:'background-image:url(' + image_url +')'"
		 	tal:attributes="style style"  >
            </div>
        </tal:repeat>
    </div>


<script>$(function () {
    $("#slider").responsiveSlides({
    maxwidth: 1400,
    maxheight: 450,
    nav: false,
    speed:   $('this').attr("data-speed"),
    timeout: $('this').attr("data-timeout"),
    pager: false,
    prevText: "<",  
    nextText: ">",    
    });
});
$(window).resize(function(){
   // Setting the heigth of the slides
   $('#slider').height($('#slider').width()*35/100);
   $('.fillme').height($('#slider').width()*35/100);
}).resize();
</script>
</tal:check>
</section>

 